<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: aixldap
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_classes::aixldap";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (a)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">aixldap</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: aixldap</h1>
<div class="box_info">
  
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Setup AD LDAP Authentication on AIX

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>aixldap</p>

<p>A description of what this class does</p>

<h3 id="label-Params">Params</h3>

<p>NOTE: defaults are provided with module level hieradata</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_aixldap'>aixldap</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>base_dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>REQUIRED LDAP Base DN, such as dc=domain,dc=com</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bind_dn</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>REQUIRED LDAP Bind User DN, User account to connect with to search LDAP
Directory</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bind_password</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>REQUIRED LDAP Bind User Password, Password for bind_dn account.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bind_password_crypted</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>REQUIRED Encrypted String of bind_password (for ldap.cfg), use
<code>secldapclntd -e &quot;password&quot;</code> on an AIX system with the
LDAP Client packages installed to generate. It should look like:
<code>{DESv2}1AB38EC278 C2D186844D0501788FCBD</code> (NOTE: the space(s)
can occur randomly)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldapservers</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>REQUIRED Comma separated list of LDAP directory servers</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pkg_src_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Local Path on agent machine where installp packages will be located. NOTE:
Ensure the idsldap* packages are oslevel appropriate, or it may downgrade
your TL. (Default: <code>/tmp/ldap</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>enable_ldap</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether or not to activate LDAP configuration (can be used for testing).
(Default: true)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>service_ensure</span>
      
      
        <span class='type'>(<tt>Enum['running','stopped']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>secldapclntd service status (Default: <code>running</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>service_enable</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether or not to start the <code>secldapclntd</code> service at boot time.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>use_ssl</span>
      
      
        <span class='type'>(<tt>Enum['yes','SSL','TLS','NONE','no']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>SSL Parameter, used in ldap.cfg and to be passed to mksecldap. NOTE: If
this is enabled, you should also specify ssl_ca_cert_content or
ssl_ca_cert_source.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ssl_ca_cert_label</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>KDB Label for the SSL CA Certificate (Default <code>adldap</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ssl_ca_cert_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Filename of the SSL CA Certificate, which will be added as a trusted CA to
the KDB file. (Default: <code>/usr/lib/security/adldap.crt</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ssl_ca_cert_content</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RAW TEXT content of SSL CA Certificate, useful to put cert into hiera.
NOTE: REQUIRED IF <code>use_ssl</code> is <code>yes</code>,
<code>SSL</code> or <code>TLS</code> (@see ssl_ca_cert_source)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ssl_ca_cert_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Puppet File source to CA Cert file NOTE: REQUIRED IF <code>use_ssl</code>
is <code>yes</code>, <code>SSL</code> or <code>TLS</code> (@see
ssl_ca_cert_content)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_map_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Filename of user attribute map (Default:
<code>/etc/security/ldap/sfur2user.map</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_map_content</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RAW TEXT content of the user attribute map, useful to put content into
hiera. (@see user_map_source)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>user_map_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Puppet File source for user attribute map (@see user_map_content)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_map_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Filename of group attribute map (Default:
<code>/etc/security/ldap/sfur2group.map</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_map_content</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>RAW TEXT content of the group attribute map, useful to put content into
hiera. (@see group_map_source)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group_map_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Puppet File source for group attribute map (@see group_map_content)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldap_cfg_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Filename for the ldap.cfg file (Default:
<code>/etc/security/ldap/ldap.cfg</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ldap_cfg_options</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Hash of options for ldap.cfg file. This is a good place for additional
options that are not handled directly by this module. These options will be
merged in hieradata and included in the ldap.cfg. Default: 
aixldap::ldap_cfg_options:  serverschematype: sfur2  searchmode: ALL 
ldapport: 389  ldapsslport: 636  userclasses:
user,person,organizationalperson  groupclasses: group</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>auth_type</span>
      
      
        <span class='type'>(<tt>Enum['unix_auth','ldap_auth']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Authentication type, passed to mksecldap and part of ldap.cfg (Default:
<code>unix_auth</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default_loc</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default Entry Location in ldap.cfg and passed to mksecldap (Default:
<code>ldap</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>domain</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Domain name, (Default: (system&#39;s domain name))</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kerb_realm</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Kerberos Realm to authenticate with (Default: (uppercase system&#39;s
domain name))</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kdb_file</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Filename of the SSL KDB file. (Default: /usr/lib/security/adldap.crt)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kdb_password</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Password to “protect” KDB file (Default: ChangeMe!12345)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>kdb_password_crypted</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Encrypted KDB Password (for ldap.cfg). Use <code>secldapclntd -e
&quot;password&quot;</code> on AIX system to generate. (Default:
<code>{DESv2}B264CA89603640B735E5EFA3EA4D68789D1F7F57F0 BC7E1</code>)</p>
</div>
      
    </li>
  
</ul>


</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 66</span>

class aixldap (
  String $base_dn,
  String $bind_dn,
  String $bind_password,
  String $bind_password_crypted,
  String $ldapservers,
  String $pkg_src_path,
  Boolean $enable_ldap, # hiera
  Enum[&#39;running&#39;,&#39;stopped&#39;] $service_ensure, # hiera
  Boolean $service_enable, #hiera
  String $ssl_ca_cert_label, # hiera
  String $ssl_ca_cert_file, # hiera
  Optional[String] $ssl_ca_cert_content,
  Optional[String] $ssl_ca_cert_source,
  String $user_map_file, # hiera
  Optional[String] $user_map_content,
  Optional[String] $user_map_source,
  String $group_map_file, # hiera
  Optional[String] $group_map_content,
  Optional[String] $group_map_source,
  String $ldap_cfg_file, #hiera
  Optional[Hash] $ldap_cfg_options, # hiera
  Enum[&#39;unix_auth&#39;,&#39;ldap_auth&#39;] $auth_type, # hiera
  String $default_loc, # hiera
  String $domain, # hiera
  String $kdb_file, # hiera
  Optional[String] $kdb_password, # hiera
  Optional[String] $kdb_password_crypted, #hiera
  Optional[String] $kerb_realm, # hiera
  Enum[&#39;yes&#39;,&#39;SSL&#39;,&#39;TLS&#39;,&#39;NONE&#39;,&#39;no&#39;] $use_ssl, # hiera
) {

  # Ensure Kerberos Realm is uppercase, default to &quot;domain&quot;
  $kerb_realm_real = upcase(pick($kerb_realm, $facts[&#39;networking&#39;][&#39;domain&#39;]))

  # Ensure Local users authenticate locally
  # NOTE: root and virtuser will be handled elsewhere
  $local_users = split($facts[&#39;aix_local_users&#39;], &#39; &#39;)
  $local_users.each |$user| {
    if !defined(User[$user]) {
      user { $user:
        ensure         =&gt; &#39;present&#39;,
        ia_load_module =&gt; &#39;files&#39;,
        attributes     =&gt; [
          &#39;SYSTEM=compat&#39;,
          &#39;registry=files&#39;,
        ],
      }
    }
  }

  # Default Path
  Exec {
    path =&gt; &#39;/usr/bin:/usr/sbin&#39;,
  }

  # Install Packages
  include aixldap::install

  # Configire
  include aixldap::configure

  # Service
  include aixldap::service

  Class[&#39;aixldap::install&#39;] -&gt; Class[&#39;aixldap::configure&#39;]

}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>